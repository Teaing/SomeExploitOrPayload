#!/usr/bin/env python
# -*- coding: utf-8 -*-
# Author:Tea

import smtplib


class MySMTP(object):

    def __init__(self, serverIP, serverPort=465, isSSL=True, deBug=0, timeOut=3):
        self.serverIP = serverIP
        self.serverPort = serverPort if isSSL else 25  # SSL 可以换端口
        if isSSL:
            self.mailSMTP = smtplib.SMTP_SSL(self.serverIP, self.serverPort, timeout=timeOut)
        else:
            self.mailSMTP = smtplib.SMTP(self.serverIP, self.serverPort, timeout=timeOut)
        self.mailSMTP.set_debuglevel(deBug)

    def auth(self, emailName, emailPass):
        try:
            self.mailSMTP.login(emailName, emailPass)
            print '{0}\t{1}\tSuccess!'.format(emailName, emailPass)
            self.mailSMTP.quit()
        except smtplib.SMTPAuthenticationError, e:
            print '{0}\t{1}\tFailure!'.format(emailName, emailPass)


def main():
    address = 'smtp.qq.com'
    pop3test = MySMTP(serverIP=address)
    pop3test.auth('admin', 'pass')


if __name__ == '__main__':
    main()
